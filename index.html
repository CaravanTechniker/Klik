<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#f4f7fb">
  <title>CaravanTechniker am Main – Wohnmobil Diagnose</title>

  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="app.css">
</head>

<body>

<header class="topbar">
  <div>
    <div class="brandTitle">CaravanTechniker am Main</div>
    <div class="brandSub">Wohnmobil Diagnose</div>
  </div>

  <div class="pills">
    <button id="langBtn" class="pill">DE</button>
    <button id="adminBtn" class="pill">ADMIN</button>
    <button id="resetBtn" class="pill">RESET</button>
  </div>
</header>

<div id="versionLabel" style="padding:6px 14px;font-size:12px;opacity:.6">v0.0.0</div>

<main id="app" class="container">
  <input id="searchInput" class="search" type="text"
         placeholder="Suche (Trittstufe, Wasserpumpe, 12V …)">

  <div id="chips" class="pills" style="margin-bottom:14px"></div>

  <div id="items"></div>
</main>

<div id="diagScreen" class="fullscreen">
  <div class="fsHeader">
    <button id="diagBackBtn" class="pill">← Zurück</button>
    <div id="diagTitle" class="fsTitle">Diagnose</div>
    <div></div>
  </div>

  <!-- app.js často čaká aj tieto kontajnery -->
  <div id="questionBox"></div>
  <div id="diagContent" class="fsContent"></div>
</div>

<section id="protocolSection" class="container" style="display:none">
  <div class="card">
    <div class="h1">Protokoll</div>
    <pre id="protocolOutput"></pre>

    <div style="display:flex;gap:10px;margin-top:10px">
      <button id="copyProtocolBtn" class="pill">Kopieren</button>
      <button id="clearProtocolBtn" class="pill">Löschen</button>
      <button id="pdfProtocolBtn" class="pill">PDF</button>
    </div>
  </div>
</section>

<!-- ===== SHIM: automaticky doplní chýbajúce elementy, aby app.js nepadal ===== -->
<script>
(function () {
  const orig = document.getElementById.bind(document);

  function tagFor(id) {
    const s = String(id || "");
    if (/Input$/i.test(s) || /search/i.test(s)) return "input";
    if (/Btn$/i.test(s) || /Button$/i.test(s)) return "button";
    if (/Label$/i.test(s)) return "div";
    if (/Output$/i.test(s) || /Log$/i.test(s)) return "pre";
    return "div";
  }

  document.getElementById = function (id) {
    let el = orig(id);
    if (el) return el;

    // vytvor chýbajúci element a schovaj ho (kým ho nepoužijeme v dizajne)
    el = document.createElement(tagFor(id));
    el.id = id;

    // rozumné defaulty
    if (el.tagName === "INPUT") el.type = "text";
    el.style.display = "none";

    document.body.appendChild(el);
    return el;
  };
})();
</script>

<!-- app.js MUSÍ BYŤ NA KONCI -->
<script src="app.js"></script>

</body>
</html>
