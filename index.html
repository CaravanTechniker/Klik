<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Wohnmobil Diagnose</title>

  <base href="./" />

  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="theme-color" content="#00BFFF" />
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="brand">
        <button id="adminBtn" class="logo" type="button" aria-label="Admin">WOMO</button>

        <div class="titles">
          <h1 id="appTitle">Wohnmobil Diagnose</h1>
          <button id="contactBtn" class="subtitle" type="button">CaravanTechniker am Main</button>
          <div id="statusLine" class="statusLine" aria-live="polite"></div>
        </div>
      </div>

      <div class="actions">
        <div class="langWrap">
          <button id="langBtn" class="pill" type="button">
            <span id="langLabel">DE</span>
            <span class="caret">▾</span>
          </button>
          <div id="langMenu" class="menu hidden" role="menu" aria-label="Language menu">
            <button class="menuItem" type="button" data-lang="de">DE</button>
            <button class="menuItem" type="button" data-lang="sk">SK</button>
          </div>
        </div>

        <button id="collapseBtn" class="pill" type="button">Einklappen</button>
        <button id="feedbackBtn" class="pill" type="button">Feedback</button>
        <button id="shareBtn" class="pill primary" type="button">Teilen</button>
      </div>
    </header>

    <section id="inlinePanels" class="inlinePanels hidden">
      <div id="contactPanel" class="panel hidden">
        <div class="panelHeader">
          <h2 id="contactTitle">Kontakt</h2>
          <button class="iconBtn" id="closePanelsBtn" type="button" aria-label="Close">✕</button>
        </div>

        <div class="panelBody">
          <div class="contactRow"><span class="label" id="lblPhone">Telefon:</span> <a id="telLink" href="tel:+4915163812554">+49 151 638 12 554</a></div>
          <div class="contactRow"><span class="label" id="lblWa">WhatsApp:</span> <a id="waLink" href="#">+49 151 638 12 554</a></div>
          <div class="contactRow"><span class="label" id="lblMail">E-Mail:</span> <a id="mailLink" href="mailto:caravantechnikerammain@gmail.com">caravantechnikerammain@gmail.com</a></div>
          <div class="hint" id="contactHint">Kontakt bitte bevorzugt per WhatsApp Nachricht oder E-Mail.</div>
        </div>
      </div>

      <div id="feedbackPanel" class="panel hidden">
        <div class="panelHeader">
          <h2 id="feedbackTitle">Feedback</h2>
          <button class="iconBtn" id="closePanelsBtn2" type="button" aria-label="Close">✕</button>
        </div>

        <div class="panelBody">
          <label class="fieldLabel" for="fbText" id="fbLabel">Dein Feedback</label>
          <textarea id="fbText" class="textarea" rows="5"></textarea>
          <div class="panelActions">
            <button id="fbSend" class="btn primary" type="button">Senden</button>
            <button id="fbCopy" class="btn" type="button">Text kopieren</button>
          </div>
          <div class="hint" id="fbHint">Senden öffnet E-Mail (Fallback: kopieren).</div>
        </div>
      </div>

      <div id="adminPanel" class="panel hidden">
        <div class="panelHeader">
          <h2 id="adminTitle">Admin</h2>
          <button class="iconBtn" id="closePanelsBtn3" type="button" aria-label="Close">✕</button>
        </div>

        <div class="panelBody">
          <div class="adminRow">
            <button id="btnExportContent" class="btn primary" type="button">Export content.json</button>
            <button id="btnImportContent" class="btn" type="button">Import content.json</button>
            <input id="fileImport" class="hidden" type="file" accept="application/json,.json" />
          </div>

          <div class="adminRow" style="margin-top:10px;">
            <button id="btnResetLocal" class="btn" type="button">Reset local content</button>
            <button id="btnReloadServer" class="btn" type="button">Reload from server</button>
          </div>

          <div class="hint" id="adminHint">Import nahradí aktuálny obsah (ukladá sa do LocalStorage). Export stiahne aktuálnu verziu.</div>
          <div class="hint" id="adminSource" style="margin-top:6px;"></div>
        </div>
      </div>
    </section>

    <main class="main">
      <section class="switchbar">
        <button id="tabCategories" class="seg active" type="button">Kategorien (0)</button>
        <button id="tabDiagnosis" class="seg" type="button">Diagnose</button>
      </section>

      <section id="categoriesView" class="card">
        <div class="cardHeader">
          <h2 id="categoriesTitle">Kategorien</h2>
          <div id="categoriesCount" class="countPill">0 ks</div>
        </div>

        <div id="categoriesList" class="list"></div>
      </section>

      <section id="diagnosisView" class="card hidden">
        <div class="cardHeader">
          <h2 id="diagnosisTitle">Diagnose</h2>
          <div id="nodeCount" class="countPill">0</div>
        </div>

        <div id="diagnosisBody" class="diagBody">
          <div class="diagLine" id="selectedTreeLine">Ausgewähltes Problem: –</div>
          <div class="diagText" id="diagText">Bitte zuerst links Kategorie/Problem auswählen.</div>

          <div id="resultBox" class="resultBox hidden">
            <div class="resultTitle" id="resultTitle">Ergebnis</div>
            <pre id="resultText" class="resultText"></pre>
            <div class="resultActions">
              <button id="btnCopyResult" class="btn" type="button">Copy</button>
              <button id="btnDownloadTxt" class="btn" type="button">TXT</button>
              <button id="btnDownloadPdf" class="btn" type="button">PDF</button>
            </div>
          </div>

          <div class="diagActions">
            <button id="btnYes" class="btn yes" type="button">Ja</button>
            <button id="btnNo" class="btn no" type="button">Nein</button>
            <button id="btnBack" class="btn back" type="button">Zurück</button>
          </div>
        </div>
      </section>

      <footer class="footer">
        <div class="onlineDot" aria-hidden="true"></div>
        <div id="onlineLabel">Online</div>
        <div class="spacer"></div>
        <div class="ver">UI v1.0</div>
      </footer>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
